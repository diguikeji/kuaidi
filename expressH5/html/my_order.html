<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/app.css" rel="stylesheet" />
		<style type="text/css">
			body, html{
				width: 100%;
				height: 90%;
				background: #F2F2F2;
			}
			
			.select_type{
				height: 45px;
				align-items: center;
				justify-content: space-around;
				background: #ffffff;
				color: #666666;
				font-size: 16px;
				position: fixed;
				width: 100%;
				box-sizing: border-box;
			}
			
			.active{
				color: #333333;
				font-weight: bold;
			}
			
			.mui-progressbar{
				height: 16px;
				border-radius: 10px;
				background: #FFD9D6;
			}
			.mui-progressbar span{
				background: #Ff5445;
				border-radius: 10px;
			}
			
			.empty_text{
				width: 100%; 
				height: 400px; 
				line-height: 400px; 
				text-align: center;
				background: #f4f4f4; 
				border: none; 
				z-index: 10;
				background: #f2f2f2;
			}
			
			.active_line{
				height: 4px;
				width: 20px;
				background-color: #107EFF;
				border-radius: 4px;
			}
			
			.item{
				height: 47px;
			}

		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" >
		    <img src="../images/back.png" class="mui-action-back">
		    <h1 class="mui-title">我的订单</h1>
		</header>
		
		<div class="mui-content" style="text-align: center; background: #F2F2F2;">
			<div class="row select_type">
				<div class="col_between item" onclick="changeType(0)">
					<span ></span>
					<span class="titleType active" >全部</span>
					<span class="active_line"></span>
				</div>
				
				<div class="col_between item" onclick="changeType(1)">
					<span ></span>
					<span class="titleType" >待付款</span>
					<span class="active_line"></span>
				</div>
				
				<div class="col_between item" onclick="changeType(2)">
					<span ></span>
					<span class="titleType" >待发货</span>
					<span class="active_line"></span>
				</div>
				
				<div class="col_between item" onclick="changeType(3)">
					<span ></span>
					<span class="titleType" >待收货</span>
					<span class="active_line"></span>
				</div>
				
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/jquery-2.1.1.min.js"></script>
		<!-- <script src="../js/app.js"></script> -->
		<script type="text/javascript">
			mui.init({
				subpages:[{
					url:'my_order_sub.html',
					id:'my_order_sub.html',
					styles:{
						top: '90px',
						bottom: '0px'
					}
				}]
			}); 
			
			function changeType(index){
				console.log($(".titleType")[index]);
				for(var i=0; i<4; i++){
					$(".titleType")[i].removeClass("active");
				}
				$(".titleType")[index].addClass("active");
				// $(this).children[2].css('color', '#333333');
			}
			
			var currentType = "DEGREE"; 
			$('.highType').click(function(){
					$('.highType').css('color', '#ff5445');
					$('.timeType').css('color', '#333333');
					$('.preType').css('color', '#333333');
					currentType = "DEGREE";
					isDesc = false;
					sendClickType();
					$(".sortImg").attr('src', "../images/change_type_icon.png");
			})
				
				$('.timeType').click(function(){
					$('.highType').css('color', '#333333');
					$('.timeType').css('color', '#ff5445');
					$('.preType').css('color', '#333333');
					if (currentType == 'TIME') {
				        //当前期限
				        isDesc = !isDesc;
				   }else{
				   		isDesc = false;
				   }
				   if(isDesc){
			        		$(".sortImg").attr('src', "../images/sort_front.png");
			        }else{
			        		$(".sortImg").attr('src', "../images/sort_back.png");
			        }
					currentType = "TIME";
					sendClickType();
				})
				
				$('.preType').click(function(){
					$('.highType').css('color', '#333333');
					$('.timeType').css('color', '#333333');
					$('.preType').css('color', '#ff5445');
					currentType = "HISTORY";
					isDesc = false;
					sendClickType();
					$(".sortImg").attr('src', "../images/change_type_icon.png");
				})
				
				function sendClickType(){
					console.log("发送事件");
					var h = plus.webview.getWebviewById("recommand_sub.html");
					mui.fire(h,'updatePreType',{currentType: currentType, isDesc: isDesc});
				}
			
		</script>
	</body>

</html>